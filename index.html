<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <title>Indeks Kepuasan Pemustaka | Perpustakaan IAIN Madura</title>

    <style type="text/css">
      * {
        box-sizing: border-box;
      }

      .box {
        padding: 30px 10px;
        border-radius: 5px;
      }

      span {
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <nav class="navbar sticky-top navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img src="http://opacperpus.iainmadura.ac.id/template/default/img/logo.png" alt="" width="30" height="24" class="d-inline-block align-text-top">
          INDEKS KEPUASAN LAYANAN PEMUSTAKA - PERPUSTAKAAN IAIN MADURA
        </a>
      </div>
    </nav>

    <div class="container mt-5">
      <div class="row">
        <div class="col-md-3">
          <div class="bg-success box">
            <div class="row">
              <div class="col-md-8 text-light text-center">
                <h5 class="text-uppercase">Very Satisfied</h5>
                <h4 id="vsVotes"></h4>
                <h6>Votes</h6>
              </div>
              <div class="col-md-4 text-center"><span id="verySatisfied" class="fs-1" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Klik emoji jika Anda SANGAT PUAS dengan pelayanan kami">ðŸ¤©</span></div>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="bg-info box">
            <div class="row">
              <div class="col-md-8 text-light text-center">
                <h5 class=" text-uppercase">Satisfied</h5>
                <h4 id="sVotes"></h4>
                <h6>Votes</h6>
              </div>
              <div class="col-md-4 text-center"><span id="satisfied" class="fs-1" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Klik emoji jika Anda PUAS dengan pelayanan kami">ðŸ˜„</span></div>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="bg-warning box">
            <div class="row">
              <div class="col-md-8 text-light text-center">
                <h5 class="text-uppercase">Not Satisfied</h5>
                <h4 id="nsVotes"></h4>
                <h6>Votes</h6>
              </div>
              <div class="col-md-4 text-center"><span id="notSatisfied" class="fs-1" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Klik emoji jika Anda TIDAK PUAS dengan pelayanan kami">ðŸ˜ž</span></div>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="bg-danger box">
            <div class="row">
              <div class="col-md-8 text-light text-center">
                <h5 class="text-uppercase">Very Dissatisfied</h5>
                <h4 id="vdVotes"></h4>
                <h6>Votes</h6>
              </div>
              <div class="col-md-4 text-center"><span id="veryDissatisfied" class="fs-1" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Klik emoji jika Anda SANGAT TIDAK PUAS dengan pelayanan kami">ðŸ˜ </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd-3/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    -->
    <script>
      const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
      const tooltipList        = tooltipTriggerList.map((tooltipTriggerEl) => new bootstrap.Tooltip(tooltipTriggerEl))
    </script>

    <script>
      let numVsVotes = 0
      let numSVotes  = 0
      let numNsVotes = 0
      let numVdVotes = 0

      let vsVotes          = document.getElementById('vsVotes')
      let sVotes           = document.getElementById('sVotes')
      let nsVotes          = document.getElementById('nsVotes')
      let vdVotes          = document.getElementById('vdVotes')
      
      let verySatisfied    = document.getElementById('verySatisfied')
      let satisfied        = document.getElementById('satisfied')
      let notSatisfied     = document.getElementById('notSatisfied')
      let veryDissatisfied = document.getElementById('veryDissatisfied')

      if (localStorage.getItem("numVsVotes")) {
        numVsVotes = localStorage.getItem("numVsVotes")
        vsVotes.innerHTML = `[ ${numVsVotes} ]`
      }

      if (localStorage.getItem("numSVotes")) {
        numSVotes = localStorage.getItem("numSVotes")
        sVotes.innerHTML = `[ ${numSVotes} ]`
      }

      if (localStorage.getItem("numNsVotes")) {
        numNsVotes = localStorage.getItem("numNsVotes")
        nsVotes.innerHTML = `[ ${numNsVotes} ]`
      }

      if (localStorage.getItem("numVdVotes")) {
        numVdVotes = localStorage.getItem("numVdVotes")
        vdVotes.innerHTML = `[ ${numVdVotes} ]`
      }

      verySatisfied.addEventListener('click', () => votes(4))
      satisfied.addEventListener('click', () => votes(3))
      notSatisfied.addEventListener('click', () => votes(2))
      veryDissatisfied.addEventListener('click', () => votes(1))

      function votes(reaction) {
        switch(reaction) {
          case 1:
            numVdVotes++;
            localStorage.setItem("numVdVotes", numVdVotes);
            vdVotes.innerHTML= `[ ${numVdVotes} ]`;
            break;
          case 2:
            numNsVotes++;
            localStorage.setItem("numNsVotes", numNsVotes);
            nsVotes.innerHTML= `[ ${numNsVotes} ]`;
            break;
          case 3:
            numSVotes++;
            localStorage.setItem("numSVotes", numSVotes);
            sVotes.innerHTML= `[ ${numSVotes} ]`;
            break;
          case 4:
            numVsVotes++;
            localStorage.setItem("numVsVotes", numVsVotes);
            vsVotes.innerHTML= `[ ${numVsVotes} ]`;
            break;
        }
      }
    </script>
  </body>
</html>